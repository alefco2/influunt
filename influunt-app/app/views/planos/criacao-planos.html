<div class="container-fluid wrapper wrapper-content animated fadeInRight" data-ng-init="init()">
  <section role="complementary" class="basic-wizard">
    <div class="content clearfix wizard-body">
      <div class="step-content body">
        <fieldset>
          <div class="row">
            <uib-alert type="danger" close="closeAlertAnel(currentAnelIndex, 'all')" data-ng-if="errors.general || errors.aneis[currentAnelIndex].checkQuantidadeGruposSemaforicosDePedestre || errors.aneis[currentAnelIndex].checkQuantidadeGruposSemaforicosVeiculares">
              <div style="padding-left: 12px;">
                <ul>
                  <li data-ng-repeat="message in errors.general">{{ message }}</li>
                </ul>
              </div>
            </uib-alert>
            <div class="text-center m-t-md pd-lf-rt">
              <div class="col-lg-2 col-sm-2 no-padding">
                <div class="col-lg-12 col-sm-12 association min-green plans side-menu">
                  <nav>
                    <ul class="" id="side-menu" influunt-metis>
                      <li data-ng-repeat="anel in aneis"
                          data-ng-class="{active: $index === currentAnelIndex}">
                        <a data-ng-click="selecionaAnel($index)">
                          <span class="nav-label">ANEL {{ anel.posicao }}</span>
                          <span class="fa arrow"></span>
                        </a>
                        <ul class="nav nav-second-level">
                          <li data-ng-repeat="plano in anel.planos"
                            data-ng-click="selecionaPlano($index)"
                            data-ng-class="{active: $index === currentPlanoIndex}">
                            <a href="">
                              PLANO {{ plano.posicao }}
                              <i class="fa fa-files-o" aria-hidden="true"></i>
                            </a>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </nav>
                </div>
              </div>
              <div class="col-lg-10 col-sm-10">
                <div class="col-lg-12 col-sm-12 association plans m-b-md">
                  <header class="developing-plans">
                    <!-- <span>Criação de planos</span> -->
                    <nav class="plans">
                      <h1>ANEL {{ currentAnel.posicao }} - PLANO {{ currentPlano.posicao }}</h1>
                    </nav>
                  </header>
                  <ng-include src="'views/planos/header-buttons.html'"></ng-include>
                </div>
              <div class="col-lg-2 col-sm-2 association table-creation-plans min-green">
                <article>
                  <div class="col-lg-12 col-sm-12 no-padding">
                    <aside>
                      <div class="form-group">
                        <label>MODO DE OPERAÇÃO</label>
                        <select class="form-control" name="modoOperacao"
                            data-ng-model="currentPlano.modoOperacao">
                          <option value="ATUADO">Atuado</option>
                          <option value="COORDENADO">Coordenado</option>
                          <option value="TEMPO_FIXO_ISOLADO">Isolado</option>
                          <option value="INTERMITENTE">Intermitente</option>
                          <option value="APAGADO">Apagado</option>
                        </select>
                      </div>
                      <div class="form-group" data-ng-if="currentPlano.modoOperacao !== 'INTERMITENTE' && currentPlano.modoOperacao !== 'APAGADO'">
                        <label>TABELA DE ENTRE-VERDES</label>
                        <select class="form-control" name="tabelaEntreverdes"
                            data-ng-model="currentTabelaEntreVerdes"
                            data-ng-options="tabela as tabela.descricao for tabela in tabelasEntreVerdes">
                        </select>
                      </div>

                      <div class="knob" style="display: block;">
                        <ng-include src="'views/planos/opcoes-lateral.html'"></ng-include>
                      </div>
                    </aside>
                  </div>
                </article>
              </div>
              <div class="col-lg-10 col-sm-10 no-padding-right">
                <div class="col-lg-12 col-sm-12 association table-creation-plans">
                  <section>
                    <div class="col-lg-12 col-sm-12 no-padding table-create-plan overflow">
                      <ul ui-sortable="sortableOptions" data-ng-model="currentPlano.sequenciaEstagios" class="ui-sortable planos">
                        <li class="ui-state-default card-estagio" data-ng-repeat="estagio in currentPlano.sequenciaEstagios"
                            data-ng-class="{'estagio-ativo': $index === currentEstagioIndex}"
                            data-ng-click="selecionaEstagio($index)">
                          <header class="sortable-header" role="heading">
                            <p class="ng-binding">E{{ estagio.posicao }}</p>
                          </header>
                          <figure>
                            <img ng-src="{{ estagio.imagem.id | imageSource }}" width="150">
                          </figure>
                        </li>
                      </ul>
                    </div>
                  </section>
                </div>

                <div class="col-lg-12 col-sm-12 association stage-time m-t-md">
                  <section>
                    <div class="col-lg-12 col-sm-12 no-padding table-create-plan overflow">
                      <ng-include src="'views/planos/tabela-planos.html'"></ng-include>
                    </div>
                  </section>
                </div>
                <div class="col-lg-12 col-sm-12 association stage-time m-t-md">
                  <div class="knob">
                    <ng-include src="'views/planos/opcoes-inferior.html'"></ng-include>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12 col-lg-12 bg-border-footer pg-bt-footer actions clearfix">
                <a data-ng-click="submitForm({$valid: true}, 'aneis', 'app.wizard_controladores.associacao')" class="btn btn-primary btn-footer right">{{ 'plugins.steps.labels.next' | translate }}</a>
                <a data-ng-click="submitForm({$valid: true}, 'aneis', 'app.wizard_controladores.dados_basicos')" class="btn btn-inverse btn-footer right m-r-sm right">{{ 'plugins.steps.labels.previous' | translate }}</a>
              </div>
            </div>
          </div>
        </div>
        </fieldset>
        <script>
          $(document).ready(function(){
            $( "nav.plans li a" ).click(function() {
              event.preventDefault();
              $( this ).find('i').toggleClass( "fa-caret-down" );
              $( this ).find('i').toggleClass( "fa-caret-up" );
              $( "nav.plans li .subnav" ).toggle();
            });
          });
        </script>

      </div>
    </div>
  </section>
</div>
