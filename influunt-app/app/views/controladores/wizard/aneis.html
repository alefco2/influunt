<fieldset data-ng-init="inicializaAneis()">
  <div class="row">

    <uib-alert type="danger" close="closeAlert(currentAnelIndex)" data-ng-if="errors.aneis[currentAnelIndex].general">
      <div style="padding-left: 12px;">
        <ul>
          <li data-ng-repeat="message in errors.general">{{ message }}</li>
          <li data-ng-repeat="message in errors.aneis[currentAnelIndex].general">{{ message }}</li>
        </ul>
      </div>
    </uib-alert>

    <div class="text-center m-t-md rings pd-lf-rt">
      <div class="col-lg-3 col-sm-3 rings-status bg-border padding-top-30">
        <div class="col-lg-4 col-sm-4"><p class="activ">{{ 'controladores.ativo' | translate | uppercase }}</p></div>
        <div class="col-lg-4 col-sm-4"><p class="activ">{{ 'controladores.anel' | translate | uppercase }}</p></div>
        <div class="clearfix"></div>
        <div class="col-lg-12 col-sm-12 no-padding">
         <nav>
           <ul>
            <li data-ng-repeat="anel in aneis"
                data-ng-click="selecionaAnel($index)"
                data-ng-class="{'anel-selecionado': $index === currentAnelIndex}" class="s">
              <div class="col-xs-1">
                <span class="number">{{ $index + 1 }}</span>
              </div>
              <div class="col-xs-2" style="padding-right:0;">
                <input type="checkbox"
                  ichecks
                  if-unchecked="desativaProximosAneis(anel)"
                  if-checked="selecionaAnel($index)"
                  is-disabled="$first || !aneis[$index - 1].ativo"
                  ng-model="anel.ativo">
              </div>
              <div class="col-xs-7">
                <label>{{ anel.idAnel }}</label>
              </div>
              <div class="col-xs-1">
                <span class="badge badge-danger badge-notification" ng-show="anelTemErro($index)">
                  <i class="fa fa-exclamation"></i>
                </span>
              </div>
            </li>
           </ul>
         </nav>
        </div>
      </div>

      <div class="col-lg-9 col-sm-9 ibox-title botton-title">
        <h2>Anel {{ currentAnel.posicao }}</h2>
      </div>

      <div class="col-lg-6 col-sm-6 groups bg-border">
        <div class="col-lg-3 col-sm-3">
          <div class="form-group">
            <label><p>{{ 'controladores.gruposPedestres' | translate }}</p></label>
            <input type="number" name="quantidadeGrupoPedestre" class="form-control"
              ng-model="currentAnel.quantidadeGrupoPedestre" />
          </div>
        </div>
        <div class="col-lg-3 col-sm-3">
          <div class="form-group">
            <label>
              <p>{{ 'controladores.gruposSinaisVeiculares' | translate }}</p>
            </label>
            <input type="number" name="quantidadeGrupoVeicular" placeholder="" class="form-control"
              data-ng-model="currentAnel.quantidadeGrupoVeicular">
          </div>
        </div>

        <div class="col-lg-3 col-sm-3">
          <div class="form-group">
            <label>
              <p>{{ 'controladores.numeroDetectores' | translate }}</p>
            </label>
            <input type="number" name="quantidadeDetectorVeicular" placeholder="" class="form-control"
              data-ng-model="currentAnel.quantidadeDetectorVeicular">
          </div>
        </div>
        <div class="col-lg-3 col-sm-3">
          <div class="form-group">
            <label>
              <p>{{ 'controladores.numeroDetectoresPedestres' | translate }}</p>
            </label>
            <input type="number" name="quantidadeDetectorPedestre" placeholder="" class="form-control"
              data-ng-model="currentAnel.quantidadeDetectorPedestre">
          </div>
        </div>

        <div class="col-lg-12 col-sm-12">
          <div class="form-group">
            <label>
              <p>{{ 'controladores.localizacao' | translate }}</p>
            </label>
            <textarea type="text" name="localizacao" placeholder="" class="form-control"
              data-ng-model="currentAnel.localizacao"></textarea>
          </div>
          <div class="form-group"><label><p>{{ 'controladores.numeroSMEE' | translate }}</p></label>
          <input type="text" name="numeroSMEE" placeholder="" class="form-control"
            data-ng-model="currentAnel.numeroSMEE"></div>
        </div>
        <div class="col-lg-12 col-sm-12">
          <div class="col-lg-12 col-sm-12 no-padding">
            <div class="form-group">
              <label>{{ 'controladores.localizacao' | translate }}:</label>
              <helper-endereco ng-model="currentAnel.endereco" latitude="currentAnel.latitude" longitude="currentAnel.longitude"></helper-endereco>
            </div>
          </div>

            <figure>
              <div influunt-map
                latitude="currentAnel.latitude"
                longitude="currentAnel.longitude"
                class="influunt-map">
              </div>
            </figure>

		       <div class="col-lg-6 col-sm-6 no-padding" data-ng-class="{'has-error': errors.aneis[currentAnelIndex].latitudeOk}">
			       <div class="form-group">
			         <label class="col-sm-12 no-padding control-label">{{ 'controladores.latitude' | translate }}:</label>
			         <input type="number" placeholder="" name="latitude" class="form-control"
			           data-ng-model="currentAnel.latitude">
			         <p class="help-block error-msg" data-ng-repeat="error in errors.aneis[currentAnelIndex].latitudeOk">{{ error }}</p>
			       </div>
			     </div>

			     <div class="col-lg-6 col-sm-6 no-padding-right" data-ng-class="{'has-error': errors.aneis[currentAnelIndex].longitudeOk}">
			       <div class="form-group">
			         <label class="col-sm-12 no-padding control-label">{{ 'controladores.longitude' | translate }}:</label>
			         <input type="number" placeholder="" name="longitude" class="form-control"
			           data-ng-model="currentAnel.longitude">
			         <p class="help-block error-msg" data-ng-repeat="error in errors.aneis[currentAnelIndex].longitudeOk">{{ error }}</p>
			       </div>
	         </div>

          </div>
        </div>
      </div>

      <div class="col-lg-3 col-sm-3 movements">
        <hgroup>
          <label for=""><h3>{{ 'controladores.estagios' | translate }}</h3></label>
        </hgroup>

        <form class="dropzone" id="my-awesome-dropzone" imagens-url="dados.imagensUrl" enctype="multipart/form-data" influunt-dropzone anel="currentAnel" on-success="associaImagemAoEstagio(upload, imagem)">
          <fake-dropzone-preview aneis="aneis"></fake-dropzone-preview>

          <div class="dropzone-previews"></div>
          <div class="fallback">
            <input name="file" type="file" multiple />
          </div>
        </form>
      </div>
    </div>

		<div class="row">
	    <div class="col-sm-12 col-lg-12 bg-border-footer pg-bt-footer actions clearfix">
        <a data-ng-click="submitForm({$valid: true}, 'aneis', 'app.wizard_controladores.associacao')" class="btn btn-primary btn-footer right">{{ 'plugins.steps.labels.next' | translate }}</a>
        <a data-ng-click="submitForm({$valid: true}, 'aneis', 'app.wizard_controladores.dados_basicos')" class="btn btn-inverse btn-footer right m-r-sm right">{{ 'plugins.steps.labels.previous' | translate }}</a>
	    </div>
	  </div>
  </div>
</fieldset>
