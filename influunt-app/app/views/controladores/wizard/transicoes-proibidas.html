<fieldset data-ng-init="inicializaTransicoesProibidas()">
  <div class="row">
    <div class="text-center m-t-md pd-lf-rt">

      <div class="col-lg-2 col-sm-2 no-padding">
        <div class="col-lg-12 col-sm-12 association stages-page">
          <nav>
            <ul>
              <li data-ng-repeat="anel in aneis"
                 data-ng-click="selecionaAnel($index)"
                 data-ng-class="{'anel-selecionado': $index === currentAnelIndex}" class="row">
                  <div class="col-xs-7">
                    <label>Anel {{ anel.posicao }}</label>
                  </div>
                  <div class="col-xs-1">
                    <span class="badge badge-danger badge-notification" ng-show="anelTemErro($index)">
                      <i class="fa fa-exclamation"></i>
                    </span>
                  </div>
              </li>
            </ul>
          </nav>
        </div>
        <div class="col-lg-12 col-sm-12 association alternative m-t-md">
          <h1>Estágios alternativos</h1>
          <div class="col-lg-6">
            <p>Transição proibida</p>
            <nav>
              <ul>
                <li data-ng-repeat="(key, value) in currentAnel.transicoesProibidas">
                  <h1>{{ key }}</h1>
                </li>
              </ul>
            </nav>
          </div>
          <div class="col-lg-6">
            <p>Alternativa</p>
            <nav>
              <ul>
                <li data-ng-repeat="(key, value) in currentAnel.transicoesProibidas" id="estagio-alternativo-{{ key }}"
                  data-ng-class="{'has-error': getErrosEstagiosAlternativos(value.origem, value.destino)}">
                  <select ng-model="value.alternativo.id" class="form-control"
                    data-ng-options="estagio.id as ('E' + estagio.posicao) for estagio in currentAnel.estagios | filter:filterEstagiosAlternativos(value.origem, value.destino)"
                    data-ng-change="marcarTransicaoAlternativa(value)"
                    inf-tooltip
                    messages="getErrosEstagiosAlternativos(value.origem, value.destino)">
                  </select>

                  <span class="badge badge-danger badge-estagio-alternativo pull-right"
                    data-ng-if="getErrosEstagiosAlternativos(value.origem, value.destino)">
                    <i class="fa fa-exclamation"></i>
                  </span>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <div class="col-lg-10 col-sm-10 early-stage no-padding-right">
        <article class="col-lg-10 col-sm-10 no-padding early-area">
          <nav>
            <ul>
              <li data-ng-repeat="estagio in currentAnel.estagios">
                  <header role="heading">
                    <h1>E{{ $index + 1 }}</h1>
                  </header>
                  <figure>
                    <img ng-src="{{ estagio.imagem.id | imageSource }}" style="width: 155px;">
                  </figure>
              </li>
            </ul>
          </nav>
        </article>
      </div>
      <div class="col-lg-10 col-sm-10 early-stage no-padding-right tableless tableless-stages">
        <ng-include src="'views/controladores/wizard/tabela-estagios-proibidos.html'"></ng-include="template"></ng-include>
      </div>
    <div>
      <div class="col-sm-12 col-lg-12 no-pading bg-border pg-bt m-t-lg">
        <a data-ng-click="submitForm({$valid: true}, 'transicoes_proibidas', 'app.wizard_controladores.verdes_conflitantes')" class="btn btn-default left m-r-sm">{{ 'plugins.steps.labels.previous' | translate }}</a>
        <a data-ng-click="submitForm({$valid: true}, 'transicoes_proibidas', 'app.controladores')" class="btn btn-primary left">{{ 'plugins.steps.labels.next' | translate }}</a>
      </div>
    </div>
  </div>
</fieldset>
